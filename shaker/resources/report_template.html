<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US">
<head profile="http://gmpg.org/xfn/11">
  <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>

  <title>Shaker | The Report</title>

  <!-- LIBS -->

  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.11.2/jquery-ui.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.4/js/bootstrap.js"></script>
  <script type="text/javascript"
          src="https://cdn.datatables.net/1.10.2/js/jquery.dataTables.min.js"></script>
  <script type="text/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/handlebars.js/3.0.1/handlebars.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/js-yaml/3.2.7/js-yaml.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.min.js"></script>
  <script type="application/javascript"
          src="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.js"></script>

  <!-- STYLES -->

  <link rel="stylesheet"
        href="//maxcdn.bootstrapcdn.com/bootswatch/3.3.4/simplex/bootstrap.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdn.datatables.net/1.10.2/css/jquery.dataTables.min.css">
  <link rel=stylesheet type=text/css
        href="https://cdnjs.cloudflare.com/ajax/libs/c3/0.4.10/c3.css">
  <link rel='stylesheet' type='text/css'
        href='http://fonts.googleapis.com/css?family=Open+Sans:400,700,400italic&subset=latin,cyrillic'>

  <script type="application/javascript">
    var report = {"scenarios": {"scenarios/networking/l2.yaml": {"file_name": "scenarios/networking/l2.yaml", "deployment": {"vm_accommodation": ["pair", "single_room"], "template": "l2.hot"}, "execution": {"tests": [{"title": "Iperf TCP test", "interval": 1, "sla": ["bandwidth.mean > 100", "bandwidth.min > 80"], "time": 60, "csv": true, "class": "iperf_graph"}, {"class": "netperf_wrapper", "method": "tcp_download", "title": "TCP download"}, {"class": "netperf_wrapper", "method": "tcp_bidirectional", "title": "TCP bi-directional"}, {"udp": 1, "threads": 8, "class": "iperf", "title": "Iperf UDP 8 threads"}, {"method": "TCP_STREAM", "time": 60, "class": "netperf", "title": "Netperf TCP_STREAM"}]}, "description": "This scenario launches pairs of VMs in the same private network. Every VM is hosted on a separate compute node.", "title": "scenarios/networking/l2.yaml"}}, "records": [{"status": "ok", "node": "node-3", "stats": {"bandwidth": {"max": 167.375, "mean": 135.846875, "unit": "Mbps", "min": 32.875}}, "samples": [[1.0, 59.4375], [2.0, 121.0625], [3.0, 121.875], [4.0, 86.9375], [5.0, 159.0], [6.0, 117.0625], [7.0, 153.125], [8.0, 154.9375], [9.0, 135.125], [10.0, 144.25], [11.0, 151.4375], [12.0, 143.0], [13.0, 151.0625], [14.0, 144.4375], [15.0, 129.4375], [16.0, 141.5625], [17.0, 152.3125], [18.0, 139.0], [19.0, 158.375], [20.0, 146.9375], [21.0, 153.9375], [22.0, 132.1875], [23.0, 144.0625], [24.0, 151.5], [25.0, 155.625], [26.0, 155.125], [27.0, 156.625], [28.0, 143.25], [29.0, 130.1875], [30.0, 132.25], [31.0, 163.1875], [32.0, 151.4375], [33.0, 148.5625], [34.0, 143.875], [35.0, 143.0], [36.0, 135.375], [37.0, 146.3125], [38.0, 107.75], [39.0, 32.875], [40.0, 35.6875], [41.0, 33.4375], [42.0, 108.875], [43.0, 120.6875], [44.0, 127.0625], [45.0, 144.3125], [46.0, 140.9375], [47.0, 147.5], [48.0, 137.4375], [49.0, 153.5625], [50.0, 150.8125], [51.0, 167.375], [52.0, 158.0], [53.0, 148.125], [54.0, 157.75], [55.0, 154.25], [56.0, 157.375], [57.0, 128.125], [58.0, 156.375], [59.0, 154.0625], [60.0, 131.5625]], "scenario": "scenarios/networking/l2.yaml", "chart": [["time", 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0, 60.0], ["bandwidth", 59.4375, 121.0625, 121.875, 86.9375, 159.0, 117.0625, 153.125, 154.9375, 135.125, 144.25, 151.4375, 143.0, 151.0625, 144.4375, 129.4375, 141.5625, 152.3125, 139.0, 158.375, 146.9375, 153.9375, 132.1875, 144.0625, 151.5, 155.625, 155.125, 156.625, 143.25, 130.1875, 132.25, 163.1875, 151.4375, 148.5625, 143.875, 143.0, 135.375, 146.3125, 107.75, 32.875, 35.6875, 33.4375, 108.875, 120.6875, 127.0625, 144.3125, 140.9375, 147.5, 137.4375, 153.5625, 150.8125, 167.375, 158.0, 148.125, 157.75, 154.25, 157.375, 128.125, 156.375, 154.0625, 131.5625]], "sla_info": [["bandwidth.mean > 100", true, "iperf_tcp_test.1.node-3.shaker_amdifp_master_0", {"bandwidth": {"max": 167.375, "mean": 135.846875, "unit": "Mbps", "min": 32.875}}], ["bandwidth.min > 80", false, "iperf_tcp_test.1.node-3.shaker_amdifp_master_0", {"bandwidth": {"max": 167.375, "mean": 135.846875, "unit": "Mbps", "min": 32.875}}]], "meta": [["time", "s"], ["bandwidth", "Mbps"]], "command": {"type": "program", "data": "sudo nice -n -20 iperf --client 10.0.0.2 --format m --nodelay --len 8k --time 60 --parallel 1 --reportstyle C --interval 1"}, "agent_id": "shaker_amdifp_master_0", "concurrency": 1, "executor": "iperf_graph", "test": "iperf_tcp_test", "type": "raw", "stderr": "sudo: unable to resolve host shaker-amdifp-master-0\n"}, {"status": "ok", "node": "node-3", "stats": {"Ping (ms) ICMP": {"max": 150.153666868, "mean": 19.976296910401565, "unit": "ms", "min": 1.71020578957}, "TCP download": {"max": 162.905481437, "mean": 122.73452083875738, "unit": "Mbps", "min": 53.12}}, "samples": [[0.0, 10.4, null], [1.0, 2.52933130318, null], [2.0, 2.45328642455, null], [3.0, 3.10960627434, null], [4.0, 2.94967139107, null], [5.0, 1.71020578957, null], [6.0, 2.74788462267, 53.12], [7.0, 7.29936974427, 88.8030726304], [8.0, 2.39396742697, 98.5716779568], [9.0, 1.9321650775, 102.221247099], [10.0, 26.6070166305, 133.659485585], [11.0, 30.9862397726, 118.621266429], [12.0, 4.03585418738, 91.7949766654], [13.0, 12.7273854916, 115.373702239], [14.0, 24.0559231608, 129.798104491], [15.0, 9.51603100918, 135.314953522], [16.0, 2.90286961462, 130.204437326], [17.0, 150.153666868, 140.981990893], [18.0, 32.3948034345, 122.252195064], [19.0, 43.330246684, 123.643912252], [20.0, 13.2247238679, 130.573745683], [21.0, 45.9589533323, 130.768991198], [22.0, 51.2938785086, 121.436302313], [23.0, 40.059327424, 126.486614764], [24.0, 35.9873982385, 115.384643193], [25.0, 9.01920435435, 122.126055326], [26.0, 4.69059163302, 118.546078855], [27.0, 14.324477909, 124.454251418], [28.0, 39.5237527296, 150.636158992], [29.0, 66.5699346197, 107.063181988], [30.0, 33.1598454764, 86.9051356677], [31.0, 2.18577931394, 128.765768337], [32.0, 32.0766044172, 124.453008381], [33.0, 29.7703699913, 147.788173275], [34.0, 4.37049512288, 102.449387417], [35.0, 14.787011491, 145.115872195], [36.0, 40.2473338894, 102.790928393], [37.0, 28.2164539261, 111.331974448], [38.0, 6.83650476188, 81.3885476269], [39.0, 7.15161501397, 110.639798127], [40.0, 3.03025812433, 134.05606436], [41.0, 4.11014675177, 112.00421697], [42.0, 6.67210647157, 117.088114868], [43.0, 5.39375221573, 128.502990611], [44.0, 22.8407075046, 104.737071538], [45.0, 29.8139156092, 114.750234952], [46.0, 2.40986794769, 106.862405021], [47.0, 26.855632719, 147.671599446], [48.0, 41.7055931394, 106.210001192], [49.0, 22.1792492231, 140.256514061], [50.0, 47.7270746726, 150.628031435], [51.0, 41.3736581505, 148.729724067], [52.0, 28.6055303191, 124.928571221], [53.0, 33.2485501294, 118.748778352], [54.0, 18.1925533059, 106.094922886], [55.0, 12.7452994786, 121.692699373], [56.0, 23.0113544223, 162.905481437], [57.0, 7.02550374246, 136.853994773], [58.0, 6.62492567277, 133.738927668], [59.0, 11.4737393649, 121.480186454], [60.0, 8.26528952121, 138.929898728], [61.0, 19.7908994059, 145.079394501], [62.0, 15.7299003155, 126.650926519], [63.0, 13.3092915519, 138.740407251], [64.0, 32.2474030683, 151.494554915], [65.0, 11.3413624455, 139.884418815], [66.0, 2.14299140518, 134.62], [67.0, 2.38903753219, null], [68.0, 2.00873687168, null], [69.0, 2.38667171749, null]], "scenario": "scenarios/networking/l2.yaml", "chart": [["time", 0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0, 60.0, 61.0, 62.0, 63.0, 64.0, 65.0, 66.0, 67.0, 68.0, 69.0], ["Ping (ms) ICMP", 10.4, 2.52933130318, 2.45328642455, 3.10960627434, 2.94967139107, 1.71020578957, 2.74788462267, 7.29936974427, 2.39396742697, 1.9321650775, 26.6070166305, 30.9862397726, 4.03585418738, 12.7273854916, 24.0559231608, 9.51603100918, 2.90286961462, 150.153666868, 32.3948034345, 43.330246684, 13.2247238679, 45.9589533323, 51.2938785086, 40.059327424, 35.9873982385, 9.01920435435, 4.69059163302, 14.324477909, 39.5237527296, 66.5699346197, 33.1598454764, 2.18577931394, 32.0766044172, 29.7703699913, 4.37049512288, 14.787011491, 40.2473338894, 28.2164539261, 6.83650476188, 7.15161501397, 3.03025812433, 4.11014675177, 6.67210647157, 5.39375221573, 22.8407075046, 29.8139156092, 2.40986794769, 26.855632719, 41.7055931394, 22.1792492231, 47.7270746726, 41.3736581505, 28.6055303191, 33.2485501294, 18.1925533059, 12.7452994786, 23.0113544223, 7.02550374246, 6.62492567277, 11.4737393649, 8.26528952121, 19.7908994059, 15.7299003155, 13.3092915519, 32.2474030683, 11.3413624455, 2.14299140518, 2.38903753219, 2.00873687168, 2.38667171749], ["TCP download", null, null, null, null, null, null, 53.12, 88.8030726304, 98.5716779568, 102.221247099, 133.659485585, 118.621266429, 91.7949766654, 115.373702239, 129.798104491, 135.314953522, 130.204437326, 140.981990893, 122.252195064, 123.643912252, 130.573745683, 130.768991198, 121.436302313, 126.486614764, 115.384643193, 122.126055326, 118.546078855, 124.454251418, 150.636158992, 107.063181988, 86.9051356677, 128.765768337, 124.453008381, 147.788173275, 102.449387417, 145.115872195, 102.790928393, 111.331974448, 81.3885476269, 110.639798127, 134.05606436, 112.00421697, 117.088114868, 128.502990611, 104.737071538, 114.750234952, 106.862405021, 147.671599446, 106.210001192, 140.256514061, 150.628031435, 148.729724067, 124.928571221, 118.748778352, 106.094922886, 121.692699373, 162.905481437, 136.853994773, 133.738927668, 121.480186454, 138.929898728, 145.079394501, 126.650926519, 138.740407251, 151.494554915, 139.884418815, 134.62, null, null, null]], "meta": [["time", "s"], ["Ping (ms) ICMP", "ms"], ["TCP download", "Mbps"]], "command": {"type": "program", "data": "netperf-wrapper -H 10.0.0.2 -l 60 -s 1 -f csv tcp_download"}, "agent_id": "shaker_amdifp_master_0", "concurrency": 1, "executor": "netperf_wrapper", "test": "tcp_download", "type": "raw", "stderr": ""}, {"status": "ok", "node": "node-3", "stats": {"Ping (ms) ICMP": {"max": 153.217045767, "mean": 26.405408290645276, "unit": "ms", "min": 1.65983384964}, "TCP upload": {"max": 92.8290212822, "mean": 58.39931644381147, "unit": "Mbps", "min": 33.608031492}, "TCP download": {"max": 131.171623078, "mean": 76.721219365555, "unit": "Mbps", "min": 30.4713096337}}, "samples": [[0.0, null, 4.42, null], [1.0, null, 2.30983119815, null], [2.0, null, 2.15026250457, null], [3.0, null, 2.23964404877, null], [4.0, null, 2.07103984453, null], [5.0, null, 2.23858815374, null], [6.0, 50.38, 2.28801072734, null], [7.0, 42.9854076891, 82.0828039452, 30.4713096337], [8.0, 33.608031492, 13.2261236908, 46.6622771474], [9.0, 36.0476873891, 8.22512248886, 72.3103557805], [10.0, 45.2555784718, 60.6504868759, 75.8068516761], [11.0, 49.794062053, 12.4576075766, 93.2873944447], [12.0, 44.7440951708, 1.65983384964, 90.9089238931], [13.0, 51.3811880071, 3.89849386513, 87.8432425168], [14.0, 53.5075138966, 43.1120903362, 85.826501445], [15.0, 59.671316381, 8.27478209355, 131.171623078], [16.0, 57.564901797, 50.5899363621, 85.8350211099], [17.0, 45.1156165406, 9.43815705092, 101.542762666], [18.0, 43.705417942, 14.983412654, 116.479595181], [19.0, 54.59165619, 21.5593130427, 94.7519174395], [20.0, 54.1413379972, 16.1855878348, 91.9013325024], [21.0, 46.0942809302, 31.457997742, 104.531483452], [22.0, 54.5966410676, 7.41307668169, 96.3964169645], [23.0, 52.3653367347, 37.472492655, 84.9686537209], [24.0, 49.3720488842, 26.6205625344, 78.4050042012], [25.0, 80.4086675512, 77.9523490468, 56.1160529034], [26.0, 92.8290212822, 35.6794518828, 69.5208155718], [27.0, 56.8152348068, 2.54551103973, 78.582770171], [28.0, 52.1477177155, 8.35534433891, 91.5092409555], [29.0, 74.1849260403, 7.25108136113, 72.1599960064], [30.0, 52.7056479025, 7.07228480922, 47.0388236748], [31.0, 46.8982807725, 3.52164246366, 47.9573621154], [32.0, 55.4283550359, 1.94990765356, 54.1118166381], [33.0, 56.3400189539, 4.34060291579, 50.0953876455], [34.0, 47.7085915971, 2.76505720976, 36.9333396912], [35.0, 57.1206451631, 7.3797858108, 38.1437806152], [36.0, 79.6037406284, 22.6395783787, 54.0276775736], [37.0, 83.5351163169, 38.4622948919, 62.7590738449], [38.0, 79.6992331536, 29.5500469045, 61.4936638128], [39.0, 74.88338211, 84.7761919211, 60.3179417012], [40.0, 61.4053892744, 127.245079096, 52.8873393427], [41.0, 69.6434723886, 20.7197219171, 68.4337807663], [42.0, 77.8761827893, 35.9900974955, 72.4495634701], [43.0, 58.8394705785, 36.6186779363, 66.2380051518], [44.0, 72.9808065371, 26.2020908628, 100.889384443], [45.0, 76.8859786619, 34.1851498388, 56.275124785], [46.0, 49.7835772003, 8.65170982592, 85.0361356287], [47.0, 56.7547968128, 15.092409877, 86.7113940632], [48.0, 77.7641539516, 68.7257379309, 61.2905538654], [49.0, 64.1857739531, 153.217045767, 46.1393037446], [50.0, 67.4788519775, 12.1647461269, 77.7708599584], [51.0, 46.1816611767, 14.9498888207, 96.6048240862], [52.0, 49.0759142749, 31.5738080362, 65.0845788408], [53.0, 60.3092123774, 42.9379720823, 51.7856041887], [54.0, 42.3485953198, 61.6732395573, 66.1438229815], [55.0, 38.7290655846, 30.5978281136, 87.9094592388], [56.0, 59.3264695573, 15.9251147228, 86.6655902665], [57.0, 54.5530480076, 16.6543169616, 74.3355959566], [58.0, 57.0802449544, 30.0007892015, 87.3252026617], [59.0, 66.500439185, 81.4120820741, 96.3029250677], [60.0, 76.0318521587, 24.3169892334, 91.7866211142], [61.0, 70.2062490504, 49.4750964497, 80.9733963522], [62.0, 60.4237647784, 4.06531680462, 87.0781345414], [63.0, 75.8690497921, 15.198504998, 105.802614695], [64.0, 67.3246281104, 61.0550796845, 85.4481828523], [65.0, 43.1889569558, 5.61781843731, 104.846754097], [66.0, 46.38, 15.6845468723, 111.19], [67.0, null, 2.72589503885, null], [68.0, null, 2.15377467904, null], [69.0, null, 2.28166351818, null]], "scenario": "scenarios/networking/l2.yaml", "chart": [["time", 0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0, 60.0, 61.0, 62.0, 63.0, 64.0, 65.0, 66.0, 67.0, 68.0, 69.0], ["TCP upload", null, null, null, null, null, null, 50.38, 42.9854076891, 33.608031492, 36.0476873891, 45.2555784718, 49.794062053, 44.7440951708, 51.3811880071, 53.5075138966, 59.671316381, 57.564901797, 45.1156165406, 43.705417942, 54.59165619, 54.1413379972, 46.0942809302, 54.5966410676, 52.3653367347, 49.3720488842, 80.4086675512, 92.8290212822, 56.8152348068, 52.1477177155, 74.1849260403, 52.7056479025, 46.8982807725, 55.4283550359, 56.3400189539, 47.7085915971, 57.1206451631, 79.6037406284, 83.5351163169, 79.6992331536, 74.88338211, 61.4053892744, 69.6434723886, 77.8761827893, 58.8394705785, 72.9808065371, 76.8859786619, 49.7835772003, 56.7547968128, 77.7641539516, 64.1857739531, 67.4788519775, 46.1816611767, 49.0759142749, 60.3092123774, 42.3485953198, 38.7290655846, 59.3264695573, 54.5530480076, 57.0802449544, 66.500439185, 76.0318521587, 70.2062490504, 60.4237647784, 75.8690497921, 67.3246281104, 43.1889569558, 46.38, null, null, null], ["Ping (ms) ICMP", 4.42, 2.30983119815, 2.15026250457, 2.23964404877, 2.07103984453, 2.23858815374, 2.28801072734, 82.0828039452, 13.2261236908, 8.22512248886, 60.6504868759, 12.4576075766, 1.65983384964, 3.89849386513, 43.1120903362, 8.27478209355, 50.5899363621, 9.43815705092, 14.983412654, 21.5593130427, 16.1855878348, 31.457997742, 7.41307668169, 37.472492655, 26.6205625344, 77.9523490468, 35.6794518828, 2.54551103973, 8.35534433891, 7.25108136113, 7.07228480922, 3.52164246366, 1.94990765356, 4.34060291579, 2.76505720976, 7.3797858108, 22.6395783787, 38.4622948919, 29.5500469045, 84.7761919211, 127.245079096, 20.7197219171, 35.9900974955, 36.6186779363, 26.2020908628, 34.1851498388, 8.65170982592, 15.092409877, 68.7257379309, 153.217045767, 12.1647461269, 14.9498888207, 31.5738080362, 42.9379720823, 61.6732395573, 30.5978281136, 15.9251147228, 16.6543169616, 30.0007892015, 81.4120820741, 24.3169892334, 49.4750964497, 4.06531680462, 15.198504998, 61.0550796845, 5.61781843731, 15.6845468723, 2.72589503885, 2.15377467904, 2.28166351818], ["TCP download", null, null, null, null, null, null, null, 30.4713096337, 46.6622771474, 72.3103557805, 75.8068516761, 93.2873944447, 90.9089238931, 87.8432425168, 85.826501445, 131.171623078, 85.8350211099, 101.542762666, 116.479595181, 94.7519174395, 91.9013325024, 104.531483452, 96.3964169645, 84.9686537209, 78.4050042012, 56.1160529034, 69.5208155718, 78.582770171, 91.5092409555, 72.1599960064, 47.0388236748, 47.9573621154, 54.1118166381, 50.0953876455, 36.9333396912, 38.1437806152, 54.0276775736, 62.7590738449, 61.4936638128, 60.3179417012, 52.8873393427, 68.4337807663, 72.4495634701, 66.2380051518, 100.889384443, 56.275124785, 85.0361356287, 86.7113940632, 61.2905538654, 46.1393037446, 77.7708599584, 96.6048240862, 65.0845788408, 51.7856041887, 66.1438229815, 87.9094592388, 86.6655902665, 74.3355959566, 87.3252026617, 96.3029250677, 91.7866211142, 80.9733963522, 87.0781345414, 105.802614695, 85.4481828523, 104.846754097, 111.19, null, null, null]], "meta": [["time", "s"], ["TCP upload", "Mbps"], ["Ping (ms) ICMP", "ms"], ["TCP download", "Mbps"]], "command": {"type": "program", "data": "netperf-wrapper -H 10.0.0.2 -l 60 -s 1 -f csv tcp_bidirectional"}, "agent_id": "shaker_amdifp_master_0", "concurrency": 1, "executor": "netperf_wrapper", "test": "tcp_bi-directional", "type": "raw", "stderr": ""}, {"status": "ok", "node": "node-3", "stderr": "sudo: unable to resolve host shaker-amdifp-master-0\n", "scenario": "scenarios/networking/l2.yaml", "stdout": "------------------------------------------------------------\nClient connecting to 10.0.0.2, UDP port 5001\nSending 8192 byte datagrams\nUDP buffer size: 0.20 MByte (default)\n------------------------------------------------------------\n[  4] local 10.0.0.3 port 34512 connected with 10.0.0.2 port 5001\n[  5] local 10.0.0.3 port 49806 connected with 10.0.0.2 port 5001\n[  6] local 10.0.0.3 port 36042 connected with 10.0.0.2 port 5001\n[  7] local 10.0.0.3 port 54100 connected with 10.0.0.2 port 5001\n[  9] local 10.0.0.3 port 47631 connected with 10.0.0.2 port 5001\n[  8] local 10.0.0.3 port 50686 connected with 10.0.0.2 port 5001\n[  3] local 10.0.0.3 port 45597 connected with 10.0.0.2 port 5001\n[ 10] local 10.0.0.3 port 40014 connected with 10.0.0.2 port 5001\n[ ID] Interval       Transfer     Bandwidth\n[  4]  0.0-60.1 sec  7.51 MBytes  1.05 Mbits/sec\n[  4] Sent 961 datagrams\n[  5]  0.0-60.1 sec  7.50 MBytes  1.05 Mbits/sec\n[  5] Sent 961 datagrams\n[  6]  0.0-60.1 sec  7.50 MBytes  1.05 Mbits/sec\n[  6] Sent 961 datagrams\n[  7]  0.0-60.1 sec  7.51 MBytes  1.05 Mbits/sec\n[  7] Sent 961 datagrams\n[  9]  0.0-60.1 sec  7.50 MBytes  1.05 Mbits/sec\n[  9] Sent 961 datagrams\n[  8]  0.0-60.1 sec  7.50 MBytes  1.05 Mbits/sec\n[  8] Sent 961 datagrams\n[  3]  0.0-60.1 sec  7.50 MBytes  1.05 Mbits/sec\n[  3] Sent 961 datagrams\n[ 10]  0.0-60.1 sec  7.50 MBytes  1.05 Mbits/sec\n[ 10] Sent 961 datagrams\n[SUM]  0.0-60.1 sec  60.0 MBytes  8.38 Mbits/sec\n[  4] Server Report:\n[  4]  0.0-60.0 sec  1.36 MBytes  0.19 Mbits/sec   1.638 ms    0/  961 (0%)\n[  5] Server Report:\n[  5]  0.0-60.0 sec  1.35 MBytes  0.19 Mbits/sec   2.926 ms    2/  961 (0.21%)\n[  5]  0.0-60.0 sec  4 datagrams received out-of-order\n[  6] Server Report:\n[  6]  0.0-60.0 sec  1.35 MBytes  0.19 Mbits/sec   2.606 ms    3/  961 (0.31%)\n[  6]  0.0-60.0 sec  3 datagrams received out-of-order\n[  8] Server Report:\n[  8]  0.0-60.0 sec  1.34 MBytes  0.19 Mbits/sec   1.590 ms    6/  961 (0.62%)\n[  3] Server Report:\n[  3]  0.0-60.0 sec  1.34 MBytes  0.19 Mbits/sec   1.558 ms    6/  961 (0.62%)\n[  9] Server Report:\n[  9]  0.0-60.0 sec  1.34 MBytes  0.19 Mbits/sec   2.188 ms    2/  961 (0.21%)\n[  9]  0.0-60.0 sec  2 datagrams received out-of-order\n[ 10] Server Report:\n[ 10]  0.0-60.0 sec  1.34 MBytes  0.19 Mbits/sec   1.685 ms    8/  961 (0.83%)\n[  7] Server Report:\n[  7]  0.0-60.0 sec  1.35 MBytes  0.19 Mbits/sec   2.648 ms    1/  961 (0.1%)\n", "command": {"type": "program", "data": "sudo nice -n -20 iperf --client 10.0.0.2 --format m --nodelay --len 8k --udp --time 60 --parallel 8"}, "agent_id": "shaker_amdifp_master_0", "concurrency": 1, "executor": "iperf", "test": "iperf_udp_8_threads", "type": "raw"}, {"status": "ok", "node": "node-3", "stderr": "", "scenario": "scenarios/networking/l2.yaml", "stdout": "MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 10.0.0.2 () port 0 AF_INET : demo\nRecv   Send    Send                          \nSocket Socket  Message  Elapsed              \nSize   Size    Size     Time     Throughput  \nbytes  bytes   bytes    secs.    10^6bits/sec  \n\n 87380  16384  16384    60.07     161.94   \n", "command": {"type": "program", "data": "netperf -H 10.0.0.2 -l 60 -t TCP_STREAM"}, "agent_id": "shaker_amdifp_master_0", "concurrency": 1, "executor": "netperf", "test": "netperf_tcp_stream", "type": "raw"}, {"x-chart": [["time", 0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0, 60.0, 61.0, 62.0, 63.0, 64.0, 65.0, 66.0, 67.0, 68.0, 69.0], ["Ping (ms) ICMP", 10.4, 2.52933130318, 2.45328642455, 3.10960627434, 2.94967139107, 1.71020578957, 2.74788462267, 7.29936974427, 2.39396742697, 1.9321650775, 26.6070166305, 30.9862397726, 4.03585418738, 12.7273854916, 24.0559231608, 9.51603100918, 2.90286961462, 150.153666868, 32.3948034345, 43.330246684, 13.2247238679, 45.9589533323, 51.2938785086, 40.059327424, 35.9873982385, 9.01920435435, 4.69059163302, 14.324477909, 39.5237527296, 66.5699346197, 33.1598454764, 2.18577931394, 32.0766044172, 29.7703699913, 4.37049512288, 14.787011491, 40.2473338894, 28.2164539261, 6.83650476188, 7.15161501397, 3.03025812433, 4.11014675177, 6.67210647157, 5.39375221573, 22.8407075046, 29.8139156092, 2.40986794769, 26.855632719, 41.7055931394, 22.1792492231, 47.7270746726, 41.3736581505, 28.6055303191, 33.2485501294, 18.1925533059, 12.7452994786, 23.0113544223, 7.02550374246, 6.62492567277, 11.4737393649, 8.26528952121, 19.7908994059, 15.7299003155, 13.3092915519, 32.2474030683, 11.3413624455, 2.14299140518, 2.38903753219, 2.00873687168, 2.38667171749], ["TCP download", null, null, null, null, null, null, 53.12, 88.8030726304, 98.5716779568, 102.221247099, 133.659485585, 118.621266429, 91.7949766654, 115.373702239, 129.798104491, 135.314953522, 130.204437326, 140.981990893, 122.252195064, 123.643912252, 130.573745683, 130.768991198, 121.436302313, 126.486614764, 115.384643193, 122.126055326, 118.546078855, 124.454251418, 150.636158992, 107.063181988, 86.9051356677, 128.765768337, 124.453008381, 147.788173275, 102.449387417, 145.115872195, 102.790928393, 111.331974448, 81.3885476269, 110.639798127, 134.05606436, 112.00421697, 117.088114868, 128.502990611, 104.737071538, 114.750234952, 106.862405021, 147.671599446, 106.210001192, 140.256514061, 150.628031435, 148.729724067, 124.928571221, 118.748778352, 106.094922886, 121.692699373, 162.905481437, 136.853994773, 133.738927668, 121.480186454, 138.929898728, 145.079394501, 126.650926519, 138.740407251, 151.494554915, 139.884418815, 134.62, null, null, null]], "scenario": "scenarios/networking/l2.yaml", "concurrency": 1, "test": "tcp_download", "stats": {"Ping (ms) ICMP": {"max": 150.153666868, "mean": 19.976296910401565, "unit": "ms", "min": 1.71020578957}, "TCP download": {"max": 162.905481437, "mean": 122.73452083875738, "unit": "Mbps", "min": 53.12}}, "type": "agg_concurrency", "node_chart": [["x", "node-3"], ["Mean Ping (ms) ICMP", 19.976296910401565], ["Max Ping (ms) ICMP", 150.153666868], ["Min Ping (ms) ICMP", 1.71020578957], ["Mean TCP download", 122.73452083875738], ["Max TCP download", 162.905481437], ["Min TCP download", 53.12]]}, {"test": "tcp_download", "type": "agg_test", "chart": [["Mean Ping (ms) ICMP", 19.976296910401565], ["Mean TCP download", 122.73452083875738], ["x", 1]], "scenario": "scenarios/networking/l2.yaml"}, {"sla_info": [["bandwidth.mean > 100", true, "iperf_tcp_test.1", {"bandwidth": {"max": 167.375, "mean": 135.846875, "unit": "Mbps", "min": 32.875}}], ["bandwidth.min > 80", false, "iperf_tcp_test.1", {"bandwidth": {"max": 167.375, "mean": 135.846875, "unit": "Mbps", "min": 32.875}}]], "x-chart": [["time", 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0, 60.0], ["bandwidth", 59.4375, 121.0625, 121.875, 86.9375, 159.0, 117.0625, 153.125, 154.9375, 135.125, 144.25, 151.4375, 143.0, 151.0625, 144.4375, 129.4375, 141.5625, 152.3125, 139.0, 158.375, 146.9375, 153.9375, 132.1875, 144.0625, 151.5, 155.625, 155.125, 156.625, 143.25, 130.1875, 132.25, 163.1875, 151.4375, 148.5625, 143.875, 143.0, 135.375, 146.3125, 107.75, 32.875, 35.6875, 33.4375, 108.875, 120.6875, 127.0625, 144.3125, 140.9375, 147.5, 137.4375, 153.5625, 150.8125, 167.375, 158.0, 148.125, 157.75, 154.25, 157.375, 128.125, 156.375, 154.0625, 131.5625]], "scenario": "scenarios/networking/l2.yaml", "concurrency": 1, "test": "iperf_tcp_test", "stats": {"bandwidth": {"max": 167.375, "mean": 135.846875, "unit": "Mbps", "min": 32.875}}, "type": "agg_concurrency", "node_chart": [["x", "node-3"], ["Mean bandwidth", 135.846875], ["Max bandwidth", 167.375], ["Min bandwidth", 32.875]]}, {"test": "iperf_tcp_test", "type": "agg_test", "chart": [["Mean bandwidth", 135.846875], ["x", 1]], "scenario": "scenarios/networking/l2.yaml"}, {"x-chart": [["time", 0.0, 1.0, 2.0, 3.0, 4.0, 5.0, 6.0, 7.0, 8.0, 9.0, 10.0, 11.0, 12.0, 13.0, 14.0, 15.0, 16.0, 17.0, 18.0, 19.0, 20.0, 21.0, 22.0, 23.0, 24.0, 25.0, 26.0, 27.0, 28.0, 29.0, 30.0, 31.0, 32.0, 33.0, 34.0, 35.0, 36.0, 37.0, 38.0, 39.0, 40.0, 41.0, 42.0, 43.0, 44.0, 45.0, 46.0, 47.0, 48.0, 49.0, 50.0, 51.0, 52.0, 53.0, 54.0, 55.0, 56.0, 57.0, 58.0, 59.0, 60.0, 61.0, 62.0, 63.0, 64.0, 65.0, 66.0, 67.0, 68.0, 69.0], ["TCP upload", null, null, null, null, null, null, 50.38, 42.9854076891, 33.608031492, 36.0476873891, 45.2555784718, 49.794062053, 44.7440951708, 51.3811880071, 53.5075138966, 59.671316381, 57.564901797, 45.1156165406, 43.705417942, 54.59165619, 54.1413379972, 46.0942809302, 54.5966410676, 52.3653367347, 49.3720488842, 80.4086675512, 92.8290212822, 56.8152348068, 52.1477177155, 74.1849260403, 52.7056479025, 46.8982807725, 55.4283550359, 56.3400189539, 47.7085915971, 57.1206451631, 79.6037406284, 83.5351163169, 79.6992331536, 74.88338211, 61.4053892744, 69.6434723886, 77.8761827893, 58.8394705785, 72.9808065371, 76.8859786619, 49.7835772003, 56.7547968128, 77.7641539516, 64.1857739531, 67.4788519775, 46.1816611767, 49.0759142749, 60.3092123774, 42.3485953198, 38.7290655846, 59.3264695573, 54.5530480076, 57.0802449544, 66.500439185, 76.0318521587, 70.2062490504, 60.4237647784, 75.8690497921, 67.3246281104, 43.1889569558, 46.38, null, null, null], ["Ping (ms) ICMP", 4.42, 2.30983119815, 2.15026250457, 2.23964404877, 2.07103984453, 2.23858815374, 2.28801072734, 82.0828039452, 13.2261236908, 8.22512248886, 60.6504868759, 12.4576075766, 1.65983384964, 3.89849386513, 43.1120903362, 8.27478209355, 50.5899363621, 9.43815705092, 14.983412654, 21.5593130427, 16.1855878348, 31.457997742, 7.41307668169, 37.472492655, 26.6205625344, 77.9523490468, 35.6794518828, 2.54551103973, 8.35534433891, 7.25108136113, 7.07228480922, 3.52164246366, 1.94990765356, 4.34060291579, 2.76505720976, 7.3797858108, 22.6395783787, 38.4622948919, 29.5500469045, 84.7761919211, 127.245079096, 20.7197219171, 35.9900974955, 36.6186779363, 26.2020908628, 34.1851498388, 8.65170982592, 15.092409877, 68.7257379309, 153.217045767, 12.1647461269, 14.9498888207, 31.5738080362, 42.9379720823, 61.6732395573, 30.5978281136, 15.9251147228, 16.6543169616, 30.0007892015, 81.4120820741, 24.3169892334, 49.4750964497, 4.06531680462, 15.198504998, 61.0550796845, 5.61781843731, 15.6845468723, 2.72589503885, 2.15377467904, 2.28166351818], ["TCP download", null, null, null, null, null, null, null, 30.4713096337, 46.6622771474, 72.3103557805, 75.8068516761, 93.2873944447, 90.9089238931, 87.8432425168, 85.826501445, 131.171623078, 85.8350211099, 101.542762666, 116.479595181, 94.7519174395, 91.9013325024, 104.531483452, 96.3964169645, 84.9686537209, 78.4050042012, 56.1160529034, 69.5208155718, 78.582770171, 91.5092409555, 72.1599960064, 47.0388236748, 47.9573621154, 54.1118166381, 50.0953876455, 36.9333396912, 38.1437806152, 54.0276775736, 62.7590738449, 61.4936638128, 60.3179417012, 52.8873393427, 68.4337807663, 72.4495634701, 66.2380051518, 100.889384443, 56.275124785, 85.0361356287, 86.7113940632, 61.2905538654, 46.1393037446, 77.7708599584, 96.6048240862, 65.0845788408, 51.7856041887, 66.1438229815, 87.9094592388, 86.6655902665, 74.3355959566, 87.3252026617, 96.3029250677, 91.7866211142, 80.9733963522, 87.0781345414, 105.802614695, 85.4481828523, 104.846754097, 111.19, null, null, null]], "scenario": "scenarios/networking/l2.yaml", "concurrency": 1, "test": "tcp_bi-directional", "stats": {"Ping (ms) ICMP": {"max": 153.217045767, "mean": 26.405408290645276, "unit": "ms", "min": 1.65983384964}, "TCP upload": {"max": 92.8290212822, "mean": 58.39931644381147, "unit": "Mbps", "min": 33.608031492}, "TCP download": {"max": 131.171623078, "mean": 76.721219365555, "unit": "Mbps", "min": 30.4713096337}}, "type": "agg_concurrency", "node_chart": [["x", "node-3"], ["Mean TCP upload", 58.39931644381147], ["Max TCP upload", 92.8290212822], ["Min TCP upload", 33.608031492], ["Mean Ping (ms) ICMP", 26.405408290645276], ["Max Ping (ms) ICMP", 153.217045767], ["Min Ping (ms) ICMP", 1.65983384964], ["Mean TCP download", 76.721219365555], ["Max TCP download", 131.171623078], ["Min TCP download", 30.4713096337]]}, {"test": "tcp_bi-directional", "type": "agg_test", "chart": [["Mean TCP upload", 58.39931644381147], ["Mean Ping (ms) ICMP", 26.405408290645276], ["Mean TCP download", 76.721219365555], ["x", 1]], "scenario": "scenarios/networking/l2.yaml"}], "tests": {"iperf_udp_8_threads": {"udp": 1, "threads": 8, "class": "iperf", "title": "Iperf UDP 8 threads"}, "netperf_tcp_stream": {"method": "TCP_STREAM", "time": 60, "class": "netperf", "title": "Netperf TCP_STREAM"}, "tcp_download": {"class": "netperf_wrapper", "method": "tcp_download", "title": "TCP download"}, "iperf_tcp_test": {"title": "Iperf TCP test", "interval": 1, "sla": ["bandwidth.mean > 100", "bandwidth.min > 80"], "time": 60, "csv": true, "class": "iperf_graph"}, "tcp_bi-directional": {"class": "netperf_wrapper", "method": "tcp_bidirectional", "title": "TCP bi-directional"}}, "agents": {"shaker_amdifp_slave_0": {"node": "node-5", "ip": "10.0.0.2", "instance_name": "instance-0000055f", "master": {"node": "node-3", "ip": "10.0.0.3", "instance_name": "instance-0000055d", "mode": "master", "slave_id": "shaker_amdifp_slave_0", "id": "shaker_amdifp_master_0"}, "mode": "slave", "master_id": "shaker_amdifp_master_0", "id": "shaker_amdifp_slave_0"}, "shaker_amdifp_master_0": {"node": "node-3", "slave": {"node": "node-5", "ip": "10.0.0.2", "instance_name": "instance-0000055f", "mode": "slave", "master_id": "shaker_amdifp_master_0", "id": "shaker_amdifp_slave_0"}, "ip": "10.0.0.3", "instance_name": "instance-0000055d", "mode": "master", "slave_id": "shaker_amdifp_slave_0", "id": "shaker_amdifp_master_0"}}};
  </script>

  <script type="text/javascript">
    "use strict";

    $(function () {

      const fields = ["scenario", "test", "concurrency", "node", "agent_id"];
      const state = {
        scenario: "",
        test: "",
        concurrency: "",
        node: "",
        agent_id: ""
      };
      const tablePageSize = 10;

      // compiled templates
      const scenario_source_template = Handlebars.compile($("#scenario_source_template").html());
      const test_specification_template = Handlebars.compile($("#test_specification_template").html());
      const agents_table_template = Handlebars.compile($("#agents_table_template").html());
      const records_table_template = Handlebars.compile($("#records_table_template").html());
      const executor_template = Handlebars.compile($("#executor_template").html());
      const concurrency_summary_template = Handlebars.compile($("#concurrency_summary_template").html());
      const test_summary_template = Handlebars.compile($("#test_summary_template").html());
      const sla_table_template = Handlebars.compile($("#sla_table_template").html());

      function initSingleSelector(name, values) {
        var selectorId = "#" + name + "_selector";

        var selector_inst = $(selectorId);
        selector_inst.empty();
        selector_inst.append($("<option>", {
          style: "font-style: italic; text-decoration: underline;",
          value: "",
          text: selector_inst.data('placeholder')
        }));

        $.each(values, function (key, item) {
          selector_inst.append($('<option>', {
            value: item, //(key + 1),
            text: item
          }));
        });

        selector_inst.val(state[name]);

        selector_inst.
            on("change", function (e) {
              state[name] = this.value;

              // convert state -> url
              var tokens = [];
              $.each(fields.sort(), function (i, field) {
                if (state[field] != "") {
                  tokens.push(field + "=" + state[field]);
                }
              });
              window.location.href = "#" + tokens.join(":");
            });
      }

      function getFieldValues(field, records) {
        var values_set = {};

        $.each(records, function (j, record) {
          if (record["type"] == "raw") {
            values_set["" + record[field]] = true;
          }
        });

        return $.map(values_set, function (_i, value) {
          return value;
        }).sort();
      }

      function updateSelectors(records) {
        $.each(fields, function (i, field) {
          var values = getFieldValues(field, records);
          initSingleSelector(field, values);
        });
      }

      function filterRecords(records, type) {
        var res = [];
        for (var i = 0; i < records.length; i++) {
          var record = records[i];
          if (type != "" && record.type == type) {
            var flag = true;
            $.each(state, function (key, value) {
              if (value != "") {
                flag &= record[key] == value;
              }
            });
            if (flag) {
              res.push(record);
            }
          }
        }
        return res;
      }

      function getAgentsByIds(agent_ids) {
        var agents = [];
        $.each(agent_ids, function(agent_id){
          agents.push(report.agents[agent_id]);
        });
        return agents;
      }

      /* Template Rendering Funcs */

      function showScenarioSource(contentArea, scenario) {
        contentArea.append(scenario_source_template(
            {data: jsyaml.safeDump(scenario)}));
      }

      function showTestSpecification(contentArea, test) {
        contentArea.append(test_specification_template(
            {data: jsyaml.safeDump(test)}
        ))
      }

      function showExecutorRecord(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = {
          command_yaml: jsyaml.safeDump(record["command"]),
          chart_id: chart_id};
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        contentArea.append(executor_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["chart"]) {
          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'time',
              columns: record["chart"],
              types: {y: 'area'}
            },
            axis: {
              x: {label: 'time'},
              y: {label: 'Bandwidth, Mbits/s', min: 0}
            }
          });
        }
      }

      function showConcurrencySummary(contentArea, record) {
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var node_chart_id = "node_chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id, node_chart_id: node_chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        console.log(record);
        contentArea.append(concurrency_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["chart"]) {
          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'time',
              columns: record["chart"],
              types: {bandwidth: 'area'}
            },
            axis: {
              x: {label: 'time'},
              y: {label: 'Bandwidth, Mbits/s', min: 0}
            }
          });
        }
        if (record["node_chart"]) {
          c3.generate({
            bindto: "#" + node_chart_id,
            data: {
              x: 'x',
              columns: record["node_chart"],
              type: 'step',
              order: null
            },
            axis: {
              x: { type: 'category' }
            }
          });
        }
      }

      function showTestSummary(contentArea, record) {
        console.log(record);
        var chart_id = "chart_" + Math.round(Math.random() * 10000);
        var ext_options = { chart_id: chart_id };
        if (record["stats"]) {
          ext_options["stats_yaml"] = jsyaml.safeDump(record["stats"]);
        }
        contentArea.append(test_summary_template(
            {record: $.extend({}, record, ext_options)}
        ));
        if (record["chart"]) {
          c3.generate({
            bindto: "#" + chart_id,
            data: {
              x: 'x',
              columns: record["chart"],
              type: "area"
            },
            axis: {
              x: {label: 'concurrency'},
              y: {label: 'Bandwidth, Mbits/s', min: 0}
            }
          });
        }
      }

      function showAgentsTable(contentArea, filteredRecords) {
        var agent_ids = {};
        $.each(filteredRecords, function(_i, record){
          agent_ids[record.agent_id] = true;
        });

        var agents = getAgentsByIds(agent_ids);

        contentArea.append(agents_table_template({
          agents: agents,
          table_id: "agents_table"
        }));
        $("#agents_table").dataTable({
          "autoWidth": true,
          "paging": false,
          "ordering": false,
          "info": false
        });
      }

      function makeURL(record, s) {
        var extra = {};
        extra[s] = record[s];
        return "#" + $.map($.extend({}, state, extra), function (val, index) {
          return val? (index + "=" + val) : null;
        }).join(":")
      }

      function showRecordsTable(contentArea, filteredRecords) {
        $.each(filteredRecords, function(_i, record) {
          $.each(fields, function(_j, field){
            if (record[field]) {
              record[field + "_url"] = makeURL(record, field);
            }
          });
        });

        contentArea.append(records_table_template({
          records: filteredRecords,
          table_id: "records_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: filteredRecords.length > tablePageSize,
          ordering: true,
          info: false,
          searching: filteredRecords.length > tablePageSize
        });
      }

      function showSlaTable(contentArea, records) {
        if (records.length == 0) return;

        contentArea.append(sla_table_template({
          records: records,
          table_id: "sla_table"
        }));
        $("#records_table").dataTable({
          autoWidth: true,
          paging: records.length > tablePageSize,
          ordering: true,
          info: false,
          searching: records.length > tablePageSize
        });
      }

      /* Update cycle */

      function update() {
        var filteredRecords = filterRecords(report.records, "raw");
        var slaRecords = [];
        $.each(filterRecords(report.records), function(_i, record) {
          if (record["sla_info"]) {
            slaRecords.push(record);
          }
        });

        var contentArea = $("#content_area");
        contentArea.empty();

        updateSelectors(report.records);

        showRecordsTable(contentArea, filteredRecords);
        showSlaTable(contentArea, slaRecords);

        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" && state["node"] != "" &&
                state["agent_id"] != "") {
          showExecutorRecord(contentArea, filteredRecords[0]);
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] != "" && state["node"] == "" &&
                state["agent_id"] == "") {
          var agg_recs = filterRecords(report.records, "agg_concurrency");
          if (agg_recs.length > 0) {
            showConcurrencySummary(contentArea, agg_recs[0]);
          }
        }
        if (state["scenario"] != "" && state["test"] != "" &&
                state["concurrency"] == "" && state["node"] == "" &&
                state["agent_id"] == "") {
          var test_recs = filterRecords(report.records, "agg_test");
          if (test_recs.length > 0) {
            showTestSummary(contentArea, test_recs[0]);
          }
        }
        if (state["test"] != "") {
          showTestSpecification(contentArea, report.tests[state["test"]]);
        }
        if (state["scenario"] != "") {
          showScenarioSource(contentArea, report.scenarios[state["scenario"]]);
        }
        if (state["agent_id"] == "") {
          showAgentsTable(contentArea, filteredRecords);
        }
      }

      function parseUrlToState() {
        var hashUrl = window.location.hash.substr(1);

        $.each(hashUrl.split(":"), function (_i, pair) {
          var kv = pair.split("=");
          if (kv.length == 2) {
            state[kv[0]] = kv[1];
          }
        });
      }

      // entry-point
      parseUrlToState();
      console.log(state);

      // pre-process records
      $.each(report.records, function(_i, record) {
        if (record.status) {
          record["is_status_ok"] = record.status == "ok"
        }
      });

      // auto-select filters with 1 option
      $.each(fields, function(_i, field) {
        var values = getFieldValues(field, report.records);
        if (values.length == 1) {
          state[field] = values[0];
        }
      });

      update();

      $(window).on('hashchange', function() {
        parseUrlToState();
        update()
      });

      $('[data-toggle="tooltip"]').tooltip();
    });
  </script>

  <style type="text/css">
  </style>

</head>

<body>

<div class="container" id="container">
  <div class="row text-center">
    <h1>Shaker | The Report</h1>
  </div>
  <hr>
  <div class="row">
    <div class="col-md-2">
      <label for="scenario_selector" title="Scenario name">Scenario</label>
      <select id="scenario_selector" class="form-control" data-placeholder="- Any scenario -"></select>
    </div>
    <div class="col-md-2">
      <label for="test_selector" title="Test name">Test Case</label>
      <select id="test_selector" class="form-control" data-placeholder="- Any test case -"></select>
    </div>
    <div class="col-md-2">
      <label for="concurrency_selector" title="Concurrency">Concurrency</label>
      <select id="concurrency_selector" class="form-control" data-placeholder="- Any concurrency -"></select>
    </div>
    <div class="col-md-2">
      <label for="node_selector" title="Compute node">Compute Node</label>
      <select id="node_selector" class="form-control" data-placeholder="- Any node -"></select>
    </div>
    <div class="col-md-2">
      <label for="agent_id_selector" title="Agent id">Agent</label>
      <select id="agent_id_selector" class="form-control" data-placeholder="- Any agent -"></select>
    </div>
  </div>

  <div id="content_area" class="row">
    <!-- Container for the screen content -->
  </div>
</div>

<!-- TEMPLATES --------------------------------------------------------------->

<!-- Scenario File -->
<script id="scenario_source_template" type="text/x-handlebars-template">
  <h3>Scenario</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Test Specification -->
<script id="test_specification_template" type="text/x-handlebars-template">
  <h3>Test Specification</h3>
  <pre>{{ data }}</pre>
</script>

<!-- Executor Result -->
<script id="executor_template" type="text/x-handlebars-template">
  <h3>Execution Summary</h3>
  {{#with record}}
  <div id="{{ chart_id }}"></div>
  <h4>Status:</h4>
  {{#if status}}
  <span class="label label-success">success</span>
  {{else}}
  <span class="label label-fail">fail</span>
  {{/if}}
  {{#if stats_yaml}}
    <h4>Stats</h4>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  <h4>Command</h4>
  <pre>{{ command_yaml }}</pre>
  {{#if stdout}}
    <h4>Stdout</h4>
    <pre>{{ stdout }}</pre>
  {{/if}}
  {{#if stderr}}
    <h4>Stderr</h4>
    <pre>{{ stderr }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Concurrency summary -->
<script id="concurrency_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id  }}"></div>
  <h3>Per-node chart</h3>
  <div id="{{ node_chart_id  }}"></div>
  <h3>Stats</h3>
  <pre>{{ stats_yaml }}</pre>
  {{/with}}
</script>

<!-- Test summary -->
<script id="test_summary_template" type="text/x-handlebars-template">
  {{#with record}}
  <div id="{{ chart_id   }}"></div>
  {{#if stats_yaml}}
    <h3>Stats</h3>
    <pre>{{ stats_yaml }}</pre>
  {{/if}}
  {{/with}}
</script>

<!-- Records Table -->
<script id="records_table_template" type="text/x-handlebars-template">
  <h3>Records</h3>
  <table class="table table-striped" id="{{ table_id  }}">
    <thead>
    <tr>
      <th>Scenario</th>
      <th>Test Case</th>
      <th>Concurrency</th>
      <th>Compute Node</th>
      <th>Agent</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td><a href="{{ scenario_url }}">{{ scenario }}</a></td>
      <td><a href="{{ test_url }}">{{ test }}</a></td>
      <td><a href="{{ concurrency_url }}">{{ concurrency }}</a></td>
      <td><a href="{{ node_url }}">{{ node }}</a></td>
      <td><a href="{{ agent_id_url }}">{{ agent_id }}</a></td>
      <td>
        {{#if is_status_ok }}
          <span class="text-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{else}}
          <span class="text-danger">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

<!-- Agents List -->
<script id="agents_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{ table_id }}">
    <thead>
    <tr>
      <th>Agent</th>
      <th>Mode</th>
      <th>IP</th>
      <th>Node</th>
      <th>Instance Name</th>
    </tr>
    </thead>
    <tbody>
    {{#agents}}
    <tr>
      <td>{{ id }}</td>
      <td>{{ mode }}</td>
      <td>{{ ip }}</td>
      <td>{{ node }}</td>
      <td>{{ instance_name }}</td>
    </tr>
    {{/agents}}
    </tbody>
  </table>
</script>

<!-- SLA List -->
<script id="sla_table_template" type="text/x-handlebars-template">
  <h3>Agents</h3>
  <table class="table table-striped" id="{{  table_id }}">
    <thead>
    <tr>
      <th>Condition</th>
      <th>Location</th>
      <th>Status</th>
    </tr>
    </thead>
    <tbody>
    {{#records}}
    <tr>
      <td>{{ sla }}</td>
      <td>{{ location }}</td>
      <td>
        {{#if is_status_ok }}
          <span class="text-success">
            <span class="glyphicon glyphicon-ok" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{else}}
          <span class="text-danger">
            <span class="glyphicon glyphicon-remove" aria-hidden="true"></span>
            {{ status }}
          </span>
        {{/if}}
      </td>
    </tr>
    {{/records}}
    </tbody>
  </table>
</script>

</body>
</html>